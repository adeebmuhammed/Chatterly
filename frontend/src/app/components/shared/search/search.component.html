<div class="search-wrapper">
  <input
    type="text"
    placeholder="Search..."
    class="search-input"
    [(ngModel)]="searchQuery"
    (ngModelChange)="onSearchInput($event)"
  />

  <div class="dropdown" *ngIf="searchQuery">
    <div class="loading" *ngIf="isLoading">Searching...</div>

    <ul *ngIf="!isLoading && searchResults && searchResults.length > 0">
      <li class="dropdown-item" *ngFor="let result of searchResults">
        <!-- USER RESULT -->
        <div class="result-row" *ngIf="searchType === 'user'">
          <div class="user-info" (click)="onResultClick(result, 'user')">
            <div class="name">{{ result.name }}</div>
          </div>
        </div>

        <div
          class="result-row"
          *ngIf="searchType === 'group'"
          (click)="onResultClick(result, 'group')"
        >
          <span class="group-name">
            {{ result.groupName }}
          </span>

          <button
            *ngIf="!result.participants?.includes(loggedInUserId)"
            class="join-btn"
            (click)="onJoinGroup(result, $event)"
          >
            Join
          </button>
        </div>
      </li>
    </ul>

    <div class="no-results" *ngIf="!isLoading && searchResults.length === 0">
      No results found
    </div>
  </div>
</div>
